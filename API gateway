import boto3

client = boto3.client('apigateway')

response = client.create_rest_api(
    name='My API'
)

rest_api_id = response['id']

response = client.create_resource(
    restApiId=rest_api_id,
    parentId='root',
    pathPart='myresource'
)

resource_id = response['id']

response = client.put_method(
    restApiId=rest_api_id,
    resourceId=resource_id,
    httpMethod='GET',
    authorizationType='NONE'
)

response = client.put_integration(
    restApiId=rest_api_id,
    resourceId=resource_id,
    httpMethod='GET',
    type='AWS',
    integrationHttpMethod='POST',
    uri='arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:123456789012:function:my-function/invocations'
)

response = client.create_deployment(
    restApiId=rest_api_id,
    stageName='prod'
)
